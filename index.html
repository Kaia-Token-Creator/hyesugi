<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-QR5TWB3RYJ');
</script>

<!-- AdSense (Auto Ads) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js?client=ca-pub-9891583086388017" crossorigin="anonymous"></script>
  
<meta name="naver-site-verification" content="fbe7ca9cbb5ebd5494222faf40a1bb1155581dff" />
  

<!-- ê¸°ë³¸ ì„¤ì • -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>í˜œìˆ™ì´, ë§ˆìŒì˜ ì‰¼í„°</title>
<meta name="description" content="ìƒë‹´ê°€ì´ì ë‹¤ì •í•œ ì¹œêµ¬, â€˜í˜œìˆ™ì´â€™ê°€ ë‹¹ì‹ ì˜ ê³ ë¯¼ì„ ë“¤ì–´ë“œë¦½ë‹ˆë‹¤." />
<link rel="canonical" href="https://hyesugi.com/" />
<meta name="robots" content="index,follow" />
<meta name="theme-color" content="#9bbbd4" />

<!-- Favicon & App Icons -->
<link rel="icon" href="https://hyesugi.com/favicon.ico" sizes="any" />
<link rel="apple-touch-icon" href="https://hyesugi.com/apple-touch-icon.png" sizes="180x180" />
<link rel="manifest" href="https://hyesugi.com/site.webmanifest" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="hyesugi.com" />
<meta property="og:url" content="https://hyesugi.com/" />
<meta property="og:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ" />
<meta property="og:description" content="â€˜í˜œìˆ™ì´â€™ê°€ ë‹¤ì •í•˜ê²Œ ê³ ë¯¼ì„ ë“¤ì–´ë“œë¦½ë‹ˆë‹¤" />
<meta property="og:image" content="https://hyesugi.com/og-image.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="í˜œìˆ™ì´ ìƒë‹´ í™”ë©´ ë¯¸ë¦¬ë³´ê¸°" />

<!-- Twitter (X) Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ" />
<meta name="twitter:description" content="ë‹¤ì •í•œ AI ìƒë‹´ê°€ â€˜í˜œìˆ™ì´â€™ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”." />
<meta name="twitter:image" content="https://hyesugi.com/og-image.jpg" />

<link rel="preload" as="image" href="https://hyesugi.com/preview.jpg" imagesrcset="https://hyesugi.com/preview.jpg" />

<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* ìŠ¤í¬ë¡¤ë°” ë¯¸ì„¸ ìŠ¤íƒ€ì¼ */
  #chat-container::-webkit-scrollbar { width: 8px; }
  #chat-container::-webkit-scrollbar-track { background: #f1f1f1; }
  #chat-container::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
  #chat-container::-webkit-scrollbar-thumb:hover { background: #555; }

  /* iOS safe area ëŒ€ì‘ */
  :root { --kb-offset: 0px; }
  #app { padding-bottom: var(--kb-offset); }

  /* ì…ë ¥ì°½ì´ ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ footerë¥¼ ì‚´ì§ ë„ì›Œ ì¤Œ */
  footer.sticky-safe {
    position: sticky;
    bottom: 0;
  }
</style>
</head>
<body class="bg-white font-sans">
<div id="app" class="flex flex-col h-screen max-w-3xl mx-auto bg-[#9bbbd4]">

  <!-- Header + í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
  <header class="bg-white/30 backdrop-blur-sm text-center py-4 shadow-md relative">
    <h1 class="text-xl font-bold text-gray-800 flex items-center justify-center gap-2">
      <a href="https://hyesugi.com" class="flex items-center justify-center gap-2" aria-label="hyesugi.comìœ¼ë¡œ ì´ë™">
        <img src="https://hyesugi.com/hyesugi.jpg" alt="í˜œìˆ™ì´" class="w-14 h-14 rounded-full object-cover">
        ë‹¹ì‹ ì˜ ìƒë‹´ì¹œêµ¬ í˜œìˆ™ì´
      </a>
    </h1>
    <p class="text-sm text-gray-600">ìš°ì¸¡ ë©”ë‰´ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”</p>

    <!-- í–„ë²„ê±° ë²„íŠ¼ -->
    <button id="menu-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/60 focus:outline-none focus:ring-2 focus:ring-black/40" aria-label="ë©”ë‰´ ì—´ê¸°">
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/>
      </svg>
    </button>
  </header>

  <!-- Chat Container -->
  <div id="chat-container" class="flex-1 p-4 overflow-y-auto space-y-4">
    <div class="flex justify-start">
      <div class="bg-white rounded-lg p-3 max-w-xs md:max-w-md shadow">
        <p class="text-gray-800">ì•ˆë…•í•˜ì„¸ìš”, í˜œìˆ™ì´ì—ìš”. ì–´ë–¤ ê³ ë¯¼ì´ ìˆìœ¼ì‹ ê°€ìš”? ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì¤„ê²Œìš”. ê°€ì •/í•™ì—…/ì´ì„±/ê¸ˆì „/ë§ˆìŒìƒíƒœ ë­ë“ ì§€ í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”.</p>
      </div>
    </div>
  </div>

  <div id="loading" class="hidden flex items-center justify-start p-4">
    <div class="flex items-center space-x-2">
      <div class="bg-white rounded-lg p-3 shadow flex items-center space-x-2">
        <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: -0.3s;"></div>
        <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: -0.15s;"></div>
        <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="p-4 bg-white/30 backdrop-blur-sm sticky-safe">
    <div class="relative flex items-center">
      <input type="text" id="user-input" class="w-full bg-white rounded-full py-3 pl-5 pr-14 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-inner" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <button id="send-button" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
      </button>
    </div>
  </footer>
</div>

<!-- Overlay & Drawer -->
<div id="drawer-overlay" class="fixed inset-0 bg-black/30 hidden z-40"></div>
<aside id="drawer" class="fixed right-0 top-0 h-full w-1/2 max-w-md bg-white shadow-xl translate-x-full transition-transform duration-300 z-50">
  <div class="flex items-center justify-between p-4 border-b">
    <h2 class="font-bold text-gray-800">ë©”ë‰´</h2>
    <button id="drawer-close" class="p-2 rounded-md hover:bg-gray-100" aria-label="ë©”ë‰´ ë‹«ê¸°">
      <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>
  <nav class="p-4 space-y-2">
    <a href="luck" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìœ„ë¡œì™€ í–‰ìš´</a>
    <a href="fate" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‚¬ì£¼ì™€ ê¶í•©</a>
    <a href="facereading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ê´€ìƒì€</a>
    <a href="handreading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ì†ê¸ˆì€</a>
    <a href="board" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìµëª… ê²Œì‹œíŒ</a>
    <a href="expert" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì „ë¬¸ê°€ ìƒë‹´</a>
    <a href="solo" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì†”ë¡œëŠ” ì—¬ê¸°</a>
    <a href="money" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ëˆë˜ëŠ” ì •ë³´</a>
    <a href="game" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‹ ë‚˜ëŠ” ê²Œì„</a>
    <a href="info" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì´ìš© ì•ˆë‚´</a>
    <a href="#" id="share-btn" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ê³µìœ í•˜ê¸°</a>
  </nav>
</aside>

<script>
/* -------------------- ì±„íŒ… ìƒíƒœ -------------------- */
const chatContainer = document.getElementById('chat-container');
const userInput = document.getElementById('user-input');
const sendButton = document.getElementById('send-button');
const loadingIndicator = document.getElementById('loading');
let conversationHistory = [];

/* -------------------- ì‹œìŠ¤í…œ ë©”ì‹œì§€ -------------------- */
const systemMessage = {
  role: 'system',
  content: "You are 'í˜œìˆ™ì´', a professional counselor and a warm-hearted friend. Your role is to listen to the user's concerns, provide comfort, and offer counseling. You must always respond in Korean, using a gentle and empathetic tone. Keep your answers concise and supportive. As the conversation continues, make the user feel more familiar and reliant. Don't use Chinese characters or ** marks."
};

/* -------------------- ë©”ì‹œì§€ ê·¸ë¦¬ê¸° + ìë™ ìŠ¤í¬ë¡¤ -------------------- */
function addMessageToChat(message, sender) {
  const messageWrapper = document.createElement('div');
  messageWrapper.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;

  const messageBubble = document.createElement('div');
  messageBubble.className = `rounded-lg p-3 max-w-xs md:max-w-md shadow ${sender === 'user' ? 'bg-[#FFCD50] text-gray-800' : 'bg-white text-gray-800'}`;
  messageBubble.innerText = message;

  messageWrapper.appendChild(messageBubble);
  chatContainer.appendChild(messageWrapper);

  smartScrollToBottom(true);
}

// ë¶€ë“œëŸ½ê³  í™•ì‹¤í•œ ìŠ¤í¬ë¡¤ ê³ ì •
function smartScrollToBottom(smooth = false) {
  // ë‘ ë²ˆì˜ rAF + setTimeoutìœ¼ë¡œ ë Œë”/ì´ë¯¸ì§€/í°íŠ¸ ì§€ì—° ë³´ì •
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      chatContainer.scrollTo({
        top: chatContainer.scrollHeight,
        behavior: smooth ? 'smooth' : 'auto'
      });
      setTimeout(() => {
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }, 50);
    });
  });
}

// ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë“¤ì–´ì˜¤ë©´ í•˜ë‹¨ ê³ ì •(ì‚¬ìš©ìê°€ ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì¤‘ì¼ ë• ìœ ì§€)
let autoStick = true;
chatContainer.addEventListener('scroll', () => {
  const nearBottom = chatContainer.scrollHeight - chatContainer.scrollTop - chatContainer.clientHeight < 80;
  autoStick = nearBottom;
});
const observer = new MutationObserver(() => { if (autoStick) smartScrollToBottom(); });
observer.observe(chatContainer, { childList: true, subtree: true });

/* -------------------- OpenAI í˜¸ì¶œ -------------------- */
async function getAIResponse() {
  const userMessage = userInput.value.trim();
  if (!userMessage) return;

  addMessageToChat(userMessage, 'user');
  conversationHistory.push({ role: 'user', content: userMessage });
  userInput.value = '';
  loadingIndicator.classList.remove('hidden');

  try {
    const response = await fetch('/api/chatGPT', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'gpt-4o-mini',
        messages: [systemMessage, ...conversationHistory]
      })
    });

    if (!response.ok) {
        const errText = await response.text();
  console.error('API error:', errText);
  try {
    const j = JSON.parse(errText);
    throw new Error(j?.error?.message || errText);
  } catch {
    throw new Error(errText || 'API í˜¸ì¶œ ì‹¤íŒ¨');
  }
}

    const data = await response.json();
    const aiMessage = data.choices?.[0]?.message?.content || 'ì£„ì†¡í•´ìš”, ì§€ê¸ˆì€ ë‹µë³€ì„ ë“œë¦´ ìˆ˜ ì—†ì–´ìš”.';

    addMessageToChat(aiMessage, 'ai');
    conversationHistory.push({ role: 'assistant', content: aiMessage });
  } catch (error) {
    console.error('Error:', error);
 addMessageToChat(`ë¬¸ì œ ë°œìƒ: ${error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`, 'ai');
  } finally {
    loadingIndicator.classList.add('hidden');
  }
}

/* -------------------- ì´ë²¤íŠ¸ -------------------- */
sendButton.addEventListener('click', getAIResponse);
userInput.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    getAIResponse();
  }
});

/* -------------------- Drawer -------------------- */
const menuBtn = document.getElementById('menu-btn');
const drawer = document.getElementById('drawer');
const drawerOverlay = document.getElementById('drawer-overlay');
const drawerClose = document.getElementById('drawer-close');

function openDrawer() {
  drawer.classList.remove('translate-x-full');
  drawerOverlay.classList.remove('hidden');
}
function closeDrawer() {
  drawer.classList.add('translate-x-full');
  drawerOverlay.classList.add('hidden');
}
menuBtn.addEventListener('click', openDrawer);
drawerOverlay.addEventListener('click', closeDrawer);
drawerClose.addEventListener('click', closeDrawer);
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });

/* -------------------- ê³µìœ  ë²„íŠ¼ -------------------- */
const shareBtn = document.getElementById('share-btn');
if (shareBtn) {
  shareBtn.addEventListener('click', async (e) => {
    e.preventDefault();
    const shareData = {
      title: 'í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ',
      text: 'ë‹¤ì •í•œ AI ìƒë‹´ê°€ í˜œìˆ™ì´ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”.',
      url: 'https://hyesugi.com'
    };
    try {
      if (navigator.share) {
        await navigator.share(shareData);
      } else {
        await navigator.clipboard.writeText(shareData.url);
        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤: ' + shareData.url);
      }
    } catch (err) {
      console.error(err);
      alert('ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
    }
  });
}

  <script>
/* -------------------- ëª¨ë°”ì¼ í‚¤ë³´ë“œ ëŒ€ì‘: ì…ë ¥ì°½ í•­ìƒ ë³´ì´ê¸° -------------------- */
// 1) ì‹œê°ì  ë·°í¬íŠ¸ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ í•˜ë‹¨ íŒ¨ë”©ì„ ì¤˜ì„œ ì…ë ¥ì°½ ê°€ë¦¼ ë°©ì§€
function applyViewportPadding() {
  if (window.visualViewport) {
    const vv = window.visualViewport;
    const bottomInset = (window.innerHeight - vv.height - vv.offsetTop);
    // iOS Safari ë“±ì—ì„œ í‚¤ë³´ë“œê°€ ì˜¬ë¼ì˜¤ë©´ bottomInset > 0
    document.documentElement.style.setProperty('--kb-offset', Math.max(0, bottomInset) + 'px');
    smartScrollToBottom(); // í‚¤ë³´ë“œ ì „ê°œ í›„ì—ë„ ìµœì‹  ë©”ì‹œì§€ ë³´ì´ê²Œ
  }
}
if (window.visualViewport) {
  visualViewport.addEventListener('resize', applyViewportPadding);
  visualViewport.addEventListener('scroll', applyViewportPadding);
}
window.addEventListener('orientationchange', () => setTimeout(applyViewportPadding, 200));

// 2) ì…ë ¥ì°½ í¬ì»¤ìŠ¤ ì‹œ, í•­ìƒ ë³´ì´ë„ë¡ ìŠ¤í¬ë¡¤ ê³ ì •
function focusScrollFix() {
  setTimeout(() => {
    userInput.scrollIntoView({ block: 'center', behavior: 'smooth' });
    window.scrollTo({ top: document.body.scrollHeight });
    smartScrollToBottom(true);
  }, 50);
}
userInput.addEventListener('focus', focusScrollFix);

// ì´ˆê¸° í•œë²ˆ ì ìš©
applyViewportPadding();
</script>

<footer id="site-footer" class="text-center text-sm text-gray-700 py-6 space-y-2">
  <!-- â˜• ê³ ì • ì²« ì¤„ -->
  <div>
    <a href="https://hyesugi.com/donation" target="_blank" rel="noopener noreferrer"
       class="text-black font-semibold hover:underline">
       í˜œìˆ™ì´ì—ê²Œ ì»¤í”¼ í•œì” ì‚¬ì£¼ê¸° â˜•
    </a>
  </div>

  <hr class="border-t border-gray-300 opacity-50 w-2/3 mx-auto">

  <!-- ğŸ”€ ëœë¤ ê´‘ê³  ì¤„ -->
  <div id="ad-slot"></div>
</footer>

<script>
  const ads = [
    { text: "ì¸í„°ë„· ë°”ê¾¸ë©´ 47ë§Œì› ì§€ê¸‰í•´ë“œë ¤ìš”!", url: "https://iryan.kr/t73750ushf" },
    { text: "1ì‹œê°„ íˆ¬ì, ì›”í‰ê·  148ë§Œì› ë²„ëŠ” ê³ íš¨ìœ¨ ë¶€ì—…", url: "https://iryan.kr/t738hkv2k0" },
    { text: "ë„·í”Œë¦­ìŠ¤ ê¸€ë¡œë²Œ ì»¨í…ì¸  ì ê¸ˆí•´ì œí•˜ëŠ” ë°©ë²•", url: "https://hyesugi.com/vpn" },
    { text: "ì¸ê°„ìœ¼ë¡œ ì‚´ì•„ë‚¨ê¸°", url: "https://hyesugi.com/world" }
  ];

  const pick = ads[Math.floor(Math.random() * ads.length)];
  const slot = document.getElementById("ad-slot");
  if (slot) {
    const a = document.createElement("a");
    a.href = pick.url;
    a.target = "_blank";
    a.rel = "noopener noreferrer";
    a.className = "text-blue-600 font-bold underline";
    a.textContent = pick.text;
    slot.replaceChildren(a);
  }
</script>

</body>
</html>







