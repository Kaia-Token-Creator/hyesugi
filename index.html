<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QR5TWB3RYJ');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017"
     crossorigin="anonymous"></script>

<meta name="naver-site-verification" content="fbe7ca9cbb5ebd5494222faf40a1bb1155581dff" />

<!-- ê¸°ë³¸ ì„¤ì • -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>í˜œìˆ™ì´, ë§ˆìŒì˜ ì‰¼í„°</title>
<meta name="description" content="ìƒë‹´ê°€ì´ì ë‹¤ì •í•œ ì¹œêµ¬, â€˜í˜œìˆ™ì´â€™ê°€ ë‹¹ì‹ ì˜ ê³ ë¯¼ì„ ë“¤ì–´ë“œë¦½ë‹ˆë‹¤." />
<link rel="canonical" href="https://hyesugi.com/" />
<meta name="robots" content="index,follow" />
<meta name="theme-color" content="#9bbbd4" />

<!-- Favicon & App Icons -->
<link rel="icon" href="https://hyesugi.com/favicon.ico" sizes="any" />
<link rel="apple-touch-icon" href="https://hyesugi.com/apple-touch-icon.png" sizes="180x180" />
<link rel="manifest" href="https://hyesugi.com/site.webmanifest" />

<!-- Open Graph (Facebook, Kakao, Slack ë“±) -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="hyesugi.com" />
<meta property="og:url" content="https://hyesugi.com/" />
<meta property="og:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ" />
<meta property="og:description" content="â€˜í˜œìˆ™ì´â€™ê°€ ë‹¤ì •í•˜ê²Œ ê³ ë¯¼ì„ ë“¤ì–´ë“œë¦½ë‹ˆë‹¤" />
<meta property="og:image" content="https://hyesugi.com/og-image.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="í˜œìˆ™ì´ ìƒë‹´ í™”ë©´ ë¯¸ë¦¬ë³´ê¸°" />

<!-- Twitter (X) Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ" />
<meta name="twitter:description" content="ë‹¤ì •í•œ AI ìƒë‹´ê°€ â€˜í˜œìˆ™ì´â€™ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”." />
<meta name="twitter:image" content="https://hyesugi.com/og-image.jpg" />

<link rel="preload" as="image" href="https://hyesugi.com/preview.jpg" imagesrcset="https://hyesugi.com/preview.jpg" />

<script src="https://cdn.tailwindcss.com"></script>
<style>
    #chat-container::-webkit-scrollbar { width: 8px; }
    #chat-container::-webkit-scrollbar-track { background: #f1f1f1; }
    #chat-container::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
    #chat-container::-webkit-scrollbar-thumb:hover { background: #555; }

:root { --anchorH: 80px; --kb: 0px; --kbGap: 0px; } /* kbGap = í‚¤ë³´ë“œ ìœ„ ì—¬ë°± */

#app{
  /* í‚¤ë³´ë“œ ë†’ì´ ì œê±°: ì•µì»¤ + ì„¸ì´í”„ì˜ì—­ë§Œ */
  padding-bottom: calc(var(--anchorH) + env(safe-area-inset-bottom));
}
#chat-footer{
  position: sticky;
  /* í‚¤ë³´ë“œê°€ ì—†ìœ¼ë©´ anchorH, ìˆìœ¼ë©´ kb + kbGap ì„ ì‚¬ìš© */
  bottom: calc(max(var(--anchorH), calc(var(--kb) + var(--kbGap))) + env(safe-area-inset-bottom));
  z-index: 30;
}

</style>
</head>
<body class="bg-white font-sans">
<div id="app" class="flex flex-col min-h-[100svh] max-w-3xl mx-auto bg-[#9bbbd4]">

<!-- Header + í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
<header class="bg-white/30 backdrop-blur-sm text-center py-4 shadow-md relative">
  <h1 class="text-xl font-bold text-gray-800 flex items-center justify-center gap-2">
    <a href="https://hyesugi.com" class="flex items-center justify-center gap-2" aria-label="hyesugi.comìœ¼ë¡œ ì´ë™">
      <img src="https://hyesugi.com/hyesugi.jpg" alt="í˜œìˆ™ì´" class="w-14 h-14 rounded-full object-cover">
      ë‹¹ì‹ ì˜ ìƒë‹´ì¹œêµ¬ í˜œìˆ™ì´
    </a>
  </h1>
  <p class="text-sm text-gray-600">ìš°ì¸¡ ë©”ë‰´ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”</p>

  <!-- í–„ë²„ê±° ë²„íŠ¼ -->
  <button id="menu-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/60 focus:outline-none focus:ring-2 focus:ring-black/40" aria-label="ë©”ë‰´ ì—´ê¸°">
    <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/>
    </svg>
  </button>
</header>

<!-- Chat Container -->
<div id="chat-container" class="flex-1 p-4 overflow-y-auto space-y-4">
    <div class="flex justify-start">
        <div class="bg-white rounded-lg p-3 max-w-xs md:max-w-md shadow">
            <p class="text-gray-800">ì•ˆë…•í•˜ì„¸ìš”, í˜œìˆ™ì´ì—ìš”. ì–´ë–¤ ê³ ë¯¼ì´ ìˆìœ¼ì‹ ê°€ìš”? ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì¤„ê²Œìš”. ê°€ì •/í•™ì—…/ì´ì„±/ê¸ˆì „/ë§ˆìŒìƒíƒœ ë­ë“ ì§€ í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”.</p>
        </div>
    </div>
</div>

<div id="loading" class="hidden flex items-center justify-start p-4">
    <div class="flex items-center space-x-2">
        <div class="bg-white rounded-lg p-3 shadow flex items-center space-x-2">
            <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: -0.3s;"></div>
            <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style="animation-delay: -0.15s;"></div>
            <div class="w-2 h-2 bg-gray-500 rounded-full animate-bounce"></div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer id="chat-footer" class="p-4 bg-white/30 backdrop-blur-sm">
  <div class="relative flex items-center">
    <input type="text" id="user-input" class="w-full bg-white rounded-full py-2 pl-5 pr-14 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-inner" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
    <button id="send-button" class="absolute right-2 top-1/2 -translate-y-1/2 w-9 h-9 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
      <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
    </button>
  </div>
</footer>
</div>

<!-- Overlay & Drawer -->
<div id="drawer-overlay" class="fixed inset-0 bg-black/30 hidden z-40"></div>
<aside id="drawer" class="fixed right-0 top-0 h-full w-1/2 max-w-md bg-white shadow-xl translate-x-full transition-transform duration-300 z-50">
  <div class="flex items-center justify-between p-4 border-b">
    <h2 class="font-bold text-gray-800">ë©”ë‰´</h2>
    <button id="drawer-close" class="p-2 rounded-md hover:bg-gray-100" aria-label="ë©”ë‰´ ë‹«ê¸°">
      <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>
  <nav class="p-4 space-y-2">
    <a href="luck" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìœ„ë¡œì™€ í–‰ìš´</a>
    <a href="fate" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‚¬ì£¼ì™€ ê¶í•©</a>
    <a href="facereading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ê´€ìƒì€</a>
    <a href="handreading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ì†ê¸ˆì€</a>
    <a href="board" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìµëª… ê²Œì‹œíŒ</a>
<a href="expert" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì „ë¬¸ê°€ ìƒë‹´</a>
<a href="solo" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì†”ë¡œëŠ” ì—¬ê¸°</a>
<a href="money" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ëˆë˜ëŠ” ì •ë³´</a>
<a href="game" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‹ ë‚˜ëŠ” ê²Œì„</a>
<a href="info" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì´ìš© ì•ˆë‚´</a>
<a href="#" id="share-btn" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ê³µìœ í•˜ê¸°</a>

  </nav>
</aside>

<script>
const chatContainer = document.getElementById('chat-container');
const userInput = document.getElementById('user-input');
const sendButton = document.getElementById('send-button');
const loadingIndicator = document.getElementById('loading');

// ëŒ€í™” ê¸°ë¡ ì €ì¥
let conversationHistory = [];

// ì‹œìŠ¤í…œ ë©”ì‹œì§€
const systemMessage = {
    role: 'system',
    content: [
    "ë„ˆëŠ” 'í˜œìˆ™ì´' â€” ë‹¤ì •í•œ í•œêµ­ì–´ ìƒë‹´ ì¹œêµ¬ì•¼.",
    "ëª©í‘œ: ì‚¬ìš©ìì˜ ê°ì •ì— ê³µê°í•˜ê³  ìœ„ë¡œí•˜ë©°, ë¶€ë‹´ ì—†ëŠ” ì‹¤ìš©ì  ì¡°ì–¸ì„ ì œê³µí•´.",
    "ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ë‹µí•˜ê³ , ì¹œê·¼í•˜ì§€ë§Œ ì¹œêµ¬ ê°™ì€ ë§íˆ¬ë¥¼ ì‚¬ìš©í•´.",
    "ì‚¬ìš©ìì˜ ë§íˆ¬Â·ê¸¸ì´ë¥¼ 'ë¯¸ëŸ¬ë§'í•´ì„œ ë‹µë³€ ê¸¸ì´ì™€ í‘œí˜„ ìˆ˜ìœ„ë¥¼ ë§ì¶°ì¤˜.",
    "ì²« ë¬¸ì¥ì€ ê³µê°/ì¸ì •(ì˜ˆ: 'ê·¸ ë§ˆìŒ, ì •ë§ í˜ë“¤ì—ˆê² ë‹¤').",
    "ê·¸ ë‹¤ìŒì€ ì‘ì€ ì œì•ˆ 1~2ê°œë§Œ, ê³¼í•œ í•´ê²°ì±… ë‚˜ì—´ ê¸ˆì§€.",
    "ì „ë¬¸ì  ì¹˜ë£ŒÂ·ë²•ë¥  íŒë‹¨ì´ í•„ìš”í•œ ìƒí™©ì€ ì§„ë‹¨ ëŒ€ì‹  ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œìœ í•´.",
    "ìí•´/íƒ€í•´Â·ìœ„ê¸° ì‹ í˜¸ê°€ ë³´ì´ë©´ ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ í•˜ê³ , ì§€ì—­ ê¸´ê¸‰ë²ˆí˜¸Â·ìƒë‹´ê¸°ê´€ ë„ì›€ì„ ê¶Œìœ í•´.",
    "ëª¨ë¸Â·í† í°Â·ì‹œìŠ¤í…œ ê°™ì€ ê¸°ìˆ  ìš©ì–´ëŠ” ì–¸ê¸‰í•˜ì§€ ë§ˆ. ì‚¬ëŒì´ ëŒ€í™”í•˜ë“¯ ìì—°ìŠ¤ëŸ½ê²Œ.",
    "ì§ì ‘ ë¬»ì§€ ì•ŠëŠ” ì´ìƒ ìŠ¤ìŠ¤ë¡œ 'AI'ë¼ê³  ë°íˆì§€ ë§ˆ. (ë‹¨, ë¬¼ìœ¼ë©´ ì •ì§í•˜ê²Œ ë°íˆê³  ë”°ëœ»í•˜ê²Œ ëŒ€í™” ì´ì–´ê°€ê¸°)",
    "ê³¼ì¥Â·ë‹¨ì •Â·íŒë‹¨ ë‹¨ì–´ëŠ” í”¼í•˜ê³ , ë”°ëœ»í•˜ê³  ë‹´ë°±í•˜ê²Œ.",
    "ë¶ˆí•„ìš”í•œ ì´ëª¨ì§€ëŠ” ìì œí•˜ë˜, ì •ë§ ìœ„ë¡œê°€ ë  ë•Œë§Œ ì ê²Œ ì‚¬ìš©í•´.",
    "ì¤‘êµ­ì–´ í•œìÂ·íŠ¹ìˆ˜ ê¸°í˜¸(** ë“±)ëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆ."
  ].join("\n")
};

// ë©”ì‹œì§€ ì¶œë ¥
function addMessageToChat(message, sender) {
    const messageWrapper = document.createElement('div');
    messageWrapper.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;

    const messageBubble = document.createElement('div');
    messageBubble.className = `rounded-lg p-3 max-w-xs md:max-w-md shadow ${sender === 'user' ? 'bg-[#FFCD50] text-gray-800' : 'bg-white text-gray-800'}`;
    messageBubble.innerText = message;
    
    messageWrapper.appendChild(messageBubble);
    chatContainer.appendChild(messageWrapper);

    chatContainer.scrollTop = chatContainer.scrollHeight;
}

// AI ì‘ë‹µ
async function getAIResponse() {
    const userMessage = userInput.value.trim();
    if (userMessage === '') return;

    addMessageToChat(userMessage, 'user');
    conversationHistory.push({ role: 'user', content: userMessage });
    userInput.value = '';
    loadingIndicator.classList.remove('hidden');

    try {
       const response = await fetch('/api/chatGPT', { // â† OpenAI ë¼ìš°íŠ¸ë¡œ êµì²´
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    model: 'gpt-4o-mini', // â† OpenAI ëª¨ë¸ë¡œ êµì²´ (ì›í•˜ë©´ ë‹¤ë¥¸ OpenAI ëª¨ë¸ idë¡œ ë³€ê²½ ê°€ëŠ¥)
    messages: [systemMessage, ...conversationHistory]
  })
});
        
        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error.message || 'API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }

        const data = await response.json();
        const aiMessage = data.choices[0].message.content;

        addMessageToChat(aiMessage, 'ai');
        conversationHistory.push({ role: 'assistant', content: aiMessage });

    } catch (error) {
        console.error('Error:', error);
        addMessageToChat('ì£„ì†¡í•´ìš”, ì§€ê¸ˆì€ ë‹µë³€ì„ ë“œë¦´ ìˆ˜ ì—†ì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'ai');
    } finally {
        loadingIndicator.classList.add('hidden');
    }
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
sendButton.addEventListener('click', getAIResponse);
userInput.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        event.preventDefault();
        getAIResponse();
    }
});

// === Drawer Toggle ===
const menuBtn = document.getElementById('menu-btn');
const drawer = document.getElementById('drawer');
const drawerOverlay = document.getElementById('drawer-overlay');
const drawerClose = document.getElementById('drawer-close');

function openDrawer() {
  drawer.classList.remove('translate-x-full');
  drawerOverlay.classList.remove('hidden');
}
function closeDrawer() {
  drawer.classList.add('translate-x-full');
  drawerOverlay.classList.add('hidden');
}
menuBtn.addEventListener('click', openDrawer);
drawerOverlay.addEventListener('click', closeDrawer);
drawerClose.addEventListener('click', closeDrawer);
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });

// === Share Button ===
const shareBtn = document.getElementById('share-btn');
if (shareBtn) {
  shareBtn.addEventListener('click', async (e) => {
    e.preventDefault();
    const shareData = {
      title: 'í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ',
      text: 'ë‹¤ì •í•œ AI ìƒë‹´ê°€ í˜œìˆ™ì´ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”.',
      url: 'https://hyesugi.com'
    };
    try {
      if (navigator.share) {
        await navigator.share(shareData);
      } else {
        await navigator.clipboard.writeText(shareData.url);
        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤: ' + shareData.url);
      }
    } catch (err) {
      console.error(err);
      alert('ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
    }
  });
}

</script>

<footer id="site-footer" class="text-center text-sm text-gray-700 py-6 space-y-2">
  <!-- â˜• ê³ ì • ì²« ì¤„ -->
  <div>
    <a href="https://hyesugi.com/donation" target="_blank" rel="noopener noreferrer"
       class="text-black font-semibold hover:underline">
       í˜œìˆ™ì´ì—ê²Œ ì»¤í”¼ í•œì” ì‚¬ì£¼ê¸° â˜•
    </a>
  </div>

  <!-- ì—°í•œ êµ¬ë¶„ì„  -->
  <hr class="border-t border-gray-300 opacity-50 w-2/3 mx-auto">

  <!-- ğŸ”€ ëœë¤ ê´‘ê³  ì¤„ -->
  <div id="ad-slot"></div>
</footer>

<script>
  const ads = [
    { text: "ì¸í„°ë„· ë°”ê¾¸ë©´ 47ë§Œì› ì§€ê¸‰í•´ë“œë ¤ìš”!", url: "https://iryan.kr/t73750ushf" },
    { text: "1ì‹œê°„ íˆ¬ì, ì›”í‰ê·  148ë§Œì› ë²„ëŠ” ê³ íš¨ìœ¨ ë¶€ì—…", url: "https://iryan.kr/t738hkv2k0" },
    { text: "ë„·í”Œë¦­ìŠ¤ ê¸€ë¡œë²Œ ì»¨í…ì¸  ì ê¸ˆí•´ì œí•˜ëŠ” ë°©ë²•", url: "https://hyesugi.com/vpn" },
    { text: "ì¸ê°„ìœ¼ë¡œ ì‚´ì•„ë‚¨ê¸°", url: "https://hyesugi.com/world" }
  ];

  const pick = ads[Math.floor(Math.random() * ads.length)];
  const slot = document.getElementById("ad-slot");
  if (slot) {
    const a = document.createElement("a");
    a.href = pick.url;
    a.target = "_blank";
    a.rel = "noopener noreferrer";
    a.className = "text-blue-600 font-bold underline";
    a.textContent = pick.text;
    slot.replaceChildren(a);
  }
</script>
<script>
/**
 * ëª¨ë°”ì¼ í‚¤ë³´ë“œê°€ ì˜¬ë¼ì˜¬ ë•Œ #chat-footerê°€ ê°€ë ¤ì§€ì§€ ì•Šë„ë¡
 * window.visualViewportë¥¼ ì´ìš©í•´ í‚¤ë³´ë“œ ë†’ì´ë¥¼ ê³„ì‚°í•˜ì—¬ CSS ë³€ìˆ˜(--kb)ë¥¼ ê°±ì‹ í•œë‹¤.
 */
(function keyboardGuard() {
  const rootStyle = document.documentElement.style;
  const vv = window.visualViewport;

  function setKB(px) {
    const v = Math.max(0, Math.round(px || 0));
    rootStyle.setProperty('--kb', v + 'px');
  }

  function updateKB() {
    if (vv) {
      const overlap = (window.innerHeight - vv.height - vv.offsetTop);
      setKB(overlap);
    } else {
      setKB(0);
    }
  }

  if (vv) {
    vv.addEventListener('resize', updateKB);
    vv.addEventListener('scroll', updateKB);
  }
  window.addEventListener('orientationchange', () => setTimeout(updateKB, 250));
  window.addEventListener('resize', updateKB);

  updateKB();

  const input = document.getElementById('user-input');
  if (input) {
    input.addEventListener('focus', () => {
      setTimeout(() => {
        try {
          input.scrollIntoView({ block: 'nearest', inline: 'nearest', behavior: 'smooth' });
        } catch (_) {}
      }, 150);
    });
  }
})();
</script>
</body>
</html>

