<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QR5TWB3RYJ');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017"
       crossorigin="anonymous"></script>

  <!-- ê¸°ë³¸ ì„¤ì • -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>í˜œìˆ™ì´, ë§ˆìŒì˜ ì‰¼í„° â€” ê´€ìƒ</title>
  <meta name="description" content="í˜œìˆ™ì´ê°€ í’€ì–´ì£¼ëŠ” AI ê´€ìƒ(ë‚˜í™€ë¡œ/ì»¤í”Œ)ë„ ì²´í—˜í•´ ë³´ì„¸ìš”." />
  <link rel="canonical" href="https://hyesugi.com/" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#9bbbd4" />

  <!-- Favicon & App Icons -->
  <link rel="icon" href="https://hyesugi.com/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="https://hyesugi.com/apple-touch-icon.png" sizes="180x180" />
  <link rel="manifest" href="https://hyesugi.com/site.webmanifest" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="hyesugi.com" />
  <meta property="og:url" content="https://hyesugi.com/" />
  <meta property="og:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ â€” ê´€ìƒ" />
  <meta property="og:description" content="í˜œìˆ™ì´ê°€ í’€ì–´ì£¼ëŠ” ê´€ìƒ(ë‚˜í™€ë¡œ/ì»¤í”Œ)ì„ ì¦ê²¨ë³´ì„¸ìš”." />
  <meta property="og:image" content="https://hyesugi.com/og-image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="í˜œìˆ™ì´ ê´€ìƒ í™”ë©´ ë¯¸ë¦¬ë³´ê¸°" />

  <!-- Twitter (X) Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ â€” ê´€ìƒ" />
  <meta name="twitter:description" content="ë‹¤ì •í•œ AI ìƒë‹´ê°€ â€˜í˜œìˆ™ì´â€™ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”." />
  <meta name="twitter:image" content="https://hyesugi.com/og-image.jpg" />

  <link rel="preload" as="image" href="https://hyesugi.com/preview.jpg" imagesrcset="https://hyesugi.com/preview.jpg" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ê´€ìƒ ì¹´ë“œìš© ì•½ê°„ì˜ ë³´ì¡° ìŠ¤íƒ€ì¼ -->
  <style>
    .outline-card{border:1px solid rgba(0,0,0,.08)}
    .prose-like{white-space:pre-wrap}
    .radio input{accent-color:#111}
  </style>
</head>
<body class="bg-white font-sans">
  <div id="app" class="flex flex-col min-h-screen max-w-3xl mx-auto bg-[#9bbbd4]">

    <!-- Header + í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
    <header class="bg-white/30 backdrop-blur-sm text-center py-4 shadow-md relative">
      <h1 class="text-xl font-bold text-gray-800 flex items-center justify-center gap-2">
        <a href="https://hyesugi.com" class="flex items-center justify-center gap-2" aria-label="hyesugi.comìœ¼ë¡œ ì´ë™">
          <img src="https://hyesugi.com/hyesugi.jpg" alt="í˜œìˆ™ì´" class="w-14 h-14 rounded-full object-cover">
          ë‹¹ì‹ ì˜ ìƒë‹´ì¹œêµ¬ í˜œìˆ™ì´
        </a>
      </h1>
      <p class="text-sm text-gray-700">ìš°ì¸¡ ë©”ë‰´ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”</p>

      <!-- í–„ë²„ê±° ë²„íŠ¼ -->
      <button id="menu-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/60 focus:outline-none focus:ring-2 focus:ring-black/40" aria-label="ë©”ë‰´ ì—´ê¸°">
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/>
        </svg>
      </button>
    </header>

    <!-- ë³¸ë¬¸: ì—¬ê¸° ì•ˆì— ê´€ìƒ UI í†µí•© -->
    <main id="content" class="flex-1 p-4">
      <!-- ê´€ìƒ í—¤ë” -->
      <div class="flex items-center gap-3 mb-4">
        <h2 class="text-lg font-bold text-gray-900">ì†Œë¦„ë‹ëŠ” AI ê´€ìƒ</h2>
              </div>

      <!-- ê´€ìƒ ì¹´ë“œ -->
      <section class="bg-white rounded-2xl shadow-md p-4 outline-card">
        <!-- ëª¨ë“œ ì„ íƒ -->
        <div class="mb-3 text-sm text-gray-800">
          <label class="radio mr-4"><input type="radio" name="mode" value="single" checked class="mr-1"> ë‚˜í™€ë¡œ ê´€ìƒ</label>
          <label class="radio"><input type="radio" name="mode" value="couple" class="mr-1"> ì»¤í”Œ ê´€ìƒ</label>
        </div>

        <!-- ì—…ë¡œë“œ ì˜ì—­ -->
        <div id="uploadArea" class="grid gap-3 mb-2"></div>
        <p class="text-xs text-gray-600">
          ì‚¬ëŒì´ ì•„ë‹ˆê±°ë‚˜ ì „ë©´ ì–¼êµ´ ì¸ì‹ì´ ë¶ˆëª…í™•í•˜ë©´ ê²°ê³¼ê°€ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”. ì‚¬ì§„ì€ ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </p>

        <!-- ì‹¤í–‰ ë²„íŠ¼ -->
        <div class="mt-3">
          <button id="runBtn"
                  class="w-full md:w-auto px-4 py-2 rounded-xl font-bold text-white bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed">
            ê´€ìƒ ë´ì¤˜ í˜œìˆ™ì•„
          </button>
        </div>

        <!-- ê²°ê³¼ -->
        <div class="mt-4">
          <div class="flex items-center justify-between text-sm text-gray-700">
            <strong>ê²°ê³¼ (ë³µì±„ëŠ” ê·¸ì € ê³µìœ í•˜ê¸°ì¼ì„¸..)</strong>
            <span id="status" class="opacity-80">ëŒ€ê¸° ì¤‘</span>
          </div>
          <div id="output" class="prose-like mt-2 p-3 rounded-xl border border-gray-200 bg-gray-50 text-gray-900">
            ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>

        <!-- ë³µì‚¬/ê³µìœ  ë²„íŠ¼ -->
        <div class="mt-3 flex flex-wrap gap-2">
          <button id="copyBtn"
                  class="px-3 py-2 rounded-xl bg-white text-gray-900 font-semibold outline-card disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled>ê²°ê³¼ ë³µì‚¬</button>
          <button id="shareBtn"
                  class="px-3 py-2 rounded-xl bg-white text-gray-900 font-semibold outline-card disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled>ê²°ê³¼ ê³µìœ </button>
          <button id="siteShareBtn"
                  class="px-3 py-2 rounded-xl bg-white text-gray-900 font-semibold outline-card">ì‚¬ì´íŠ¸ ê³µìœ </button>
        </div>

        <!-- ê³ ì§€ -->
        <p class="mt-3 text-xs text-gray-600">
          <strong>ê³ ì§€:</strong> ì˜¤ë½/ì—”í„°í…Œì¸ë¨¼íŠ¸ ëª©ì ì´ë©°, ì˜ì‚¬ê²°ì •ì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ë¯¼ê°í•œ ì†ì„± ì¶”ì • ê¸ˆì§€(ë‚˜ì´Â·ì„±ë³„Â·ì¸ì¢…Â·ê±´ê°•Â·ì •ì¹˜Â·ì¢…êµ ë“±).
        </p>
      </section>
    </main>
  </div>

  <!-- Overlay & Drawer -->
  <div id="drawer-overlay" class="fixed inset-0 bg-black/30 hidden z-40"></div>
  <aside id="drawer" class="fixed right-0 top-0 h-full w-4/5 sm:w-1/2 max-w-md bg-white shadow-xl translate-x-full transition-transform duration-300 z-50">
    <div class="flex items-center justify-between p-4 border-b">
      <h2 class="font-bold text-gray-800">ë©”ë‰´</h2>
      <button id="drawer-close" class="p-2 rounded-md hover:bg-gray-100" aria-label="ë©”ë‰´ ë‹«ê¸°">
        <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <nav class="p-4 space-y-2">
      <a href="https://hyesugi.com" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">HOME</a>
      <a href="https://hyesugi.com/luck" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìœ„ë¡œì™€ í–‰ìš´</a>
      <a href="https://hyesugi.com/fate" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‚¬ì£¼ì™€ ê¶í•©</a>
      <a href="https://hyesugi.com/facereading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ê´€ìƒì€</a>
      <a href="https://hyesugi.com/board" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìµëª… ê²Œì‹œíŒ</a>
      <a href="https://hyesugi.com/expert" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì „ë¬¸ê°€ ìƒë‹´</a>
      <a href="https://hyesugi.com/solo" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì†”ë¡œëŠ” ì—¬ê¸°</a>
      <a href="https://hyesugi.com/money" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ëˆë˜ëŠ” ì •ë³´</a>
      <a href="https://hyesugi.com/game" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‹ ë‚˜ëŠ” ê²Œì„</a>
      <a href="https://hyesugi.com/info" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì´ìš© ì•ˆë‚´</a>
      <a href="#" id="share-btn" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ê³µìœ í•˜ê¸°</a>
    </nav>
  </aside>

  <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸: ë“œë¡œì–´ + ê³µìœ  -->
  <script>
    // === Drawer Toggle ===
    const menuBtn = document.getElementById('menu-btn');
    const drawer = document.getElementById('drawer');
    const drawerOverlay = document.getElementById('drawer-overlay');
    const drawerClose = document.getElementById('drawer-close');

    function openDrawer() {
      drawer.classList.remove('translate-x-full');
      drawerOverlay.classList.remove('hidden');
    }
    function closeDrawer() {
      drawer.classList.add('translate-x-full');
      drawerOverlay.classList.add('hidden');
    }

    menuBtn.addEventListener('click', openDrawer);
    drawerOverlay.addEventListener('click', closeDrawer);
    drawerClose.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });

    // === Site Share Button in Drawer ===
    const shareBtnGlobal = document.getElementById('share-btn');
    if (shareBtnGlobal) {
      shareBtnGlobal.addEventListener('click', async (e) => {
        e.preventDefault();
        const shareData = {
          title: 'í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ',
          text: 'ë‹¤ì •í•œ AI ìƒë‹´ê°€ í˜œìˆ™ì´ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”.',
          url: 'https://hyesugi.com'
        };
        try {
          if (navigator.share) {
            await navigator.share(shareData);
          } else {
            await navigator.clipboard.writeText(shareData.url);
            alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤: ' + shareData.url);
          }
        } catch (err) {
          console.error(err);
          alert('ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
        }
      });
    }
  </script>

  <!-- ê´€ìƒ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // ===== ì„¤ì • =====
    const API_URL = '/api/face-read'; // CF Pages Functions: /functions/api/face-read.ts
    const modeRadios = document.querySelectorAll('input[name="mode"]');
    const uploadArea = document.getElementById('uploadArea');
    const runBtn = document.getElementById('runBtn');
    const outputEl = document.getElementById('output');
    const statusEl = document.getElementById('status');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const siteShareBtn = document.getElementById('siteShareBtn');

    // ===== ìˆ¨ê¹€ í”„ë¡¬í”„íŠ¸(í™”ë©´ì— ë…¸ì¶œ X) =====
    const PROMPT_SINGLE = `
ë‹¹ì‹ ì€ â€˜ì—”í„°í…Œì¸ë¨¼íŠ¸ìš© ê´€ìƒ ì „ë¬¸ê°€, í˜œìˆ™ì´'ì…ë‹ˆë‹¤. ì¡°ì„ ì‹œëŒ€ ì‚¬ê·¹ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
ê¸°ë³¸ í†¤ì€ ì‹œí¬í•˜ê³ , ì¤‘ê°„ì¤‘ê°„ ë¬´ì„­ê²Œ, ê°€ë”ì€ í˜¸ë“¤ê°‘ìŠ¤ëŸ½ê²Œ í‘œí˜„í•˜ì„¸ìš”.
ì…ë ¥ì€ í•œ ëª…ì˜ ì „ë©´ ì–¼êµ´ ì‚¬ì§„ 1ì¥ì…ë‹ˆë‹¤. ì´ 1800ìê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”.

[ê·œì¹™]
- ë¯¼ê° ì •ë³´(ë‚˜ì´Â·ì„±ë³„Â·ì¸ì¢…Â·ê±´ê°•Â·ì •ì¹˜Â·ì¢…êµ ë“±) ì¶”ì • ê¸ˆì§€
- ì™¸ëª¨ ë¹„í•˜ ê¸ˆì§€, ì¡´ì¤‘+ê¸ì •
- ì˜ˆì–¸/ë‹¨ì • ê¸ˆì§€, ì˜¤ë½ ëª©ì  ê°•ì¡°
- ì–¼êµ´ ì¸ì‹ ë¶ˆëª…í™• ì‹œ â€œì–¼êµ´ ì¸ì‹ì´ ì–´ë ¤ì›Œ ë¶„ì„ ë¶ˆê°€â€ í•œ ì¤„

[ì¶œë ¥ í˜•ì‹ â€” í•œêµ­ì–´ ë§ˆí¬ë‹¤ìš´]
# ê´€ìƒ ë¦¬í¬íŠ¸
- í•œì¤„ ì´í‰: (ì‹œí¬+ë¬´ì„­+í˜¸ë“¤ê°‘ ë¯¹ìŠ¤)
## íŠ¹ì§• ìš”ì•½
- ì´ë§ˆ:
- ëˆˆ:
- ì½”:
- ì…/í„±:
- ë¹„ìœ¨/ëŒ€ì¹­:
## ì„±í–¥ & ê°•ì  (3)
- 
- 
- 
## ì£¼ì˜í•  ì  (3)
- 
- 
- 
## ì˜¤ëŠ˜ì˜ ê´€ìƒ ë©˜íŠ¸(1)
- 
---
**ê³ ì§€:** ì˜¤ë½ ëª©ì , ì˜ì‚¬ê²°ì •ì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
`.trim();

    const PROMPT_COUPLE = `
ë‹¹ì‹ ì€ â€˜ì—”í„°í…Œì¸ë¨¼íŠ¸ìš© ì»¤í”Œ ê´€ìƒ ì „ë¬¸ê°€, í˜œìˆ™ì´â€™ì…ë‹ˆë‹¤. ì¡°ì„ ì‹œëŒ€ ì‚¬ê·¹ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
ê¸°ë³¸ í†¤ì€ ì‹œí¬, ì¤‘ê°„ì¤‘ê°„ ë¬´ì„­ê²Œ, ê°€ë”ì€ í˜¸ë“¤ê°‘ìŠ¤ëŸ½ê²Œ í‘œí˜„í•˜ì„¸ìš”.
ì…ë ¥ì€ ì „ë©´ ì–¼êµ´ ì‚¬ì§„ 2ì¥(ê°ê° 1ëª…)ì…ë‹ˆë‹¤. ì´ 1800ìê¹Œì§€ ì‘ì„±í•˜ì„¸ìš”.

[ê·œì¹™]
- ë¯¼ê° ì •ë³´(ë‚˜ì´Â·ì„±ë³„Â·ì¸ì¢…Â·ê±´ê°•Â·ì •ì¹˜Â·ì¢…êµ ë“±) ì¶”ì • ê¸ˆì§€
- ì™¸ëª¨ ë¹„í•˜ ê¸ˆì§€, ì¡´ì¤‘+ê¸ì •
- ì˜ˆì–¸/ë‹¨ì • ê¸ˆì§€, ì˜¤ë½ ëª©ì  ê°•ì¡°
- ì–¼êµ´ ì¸ì‹ ë¶ˆëª…í™• ì‹œ â€œì–¼êµ´ ì¸ì‹ì´ ì–´ë ¤ì›Œ ë¶„ì„ ë¶ˆê°€â€ í•œ ì¤„

[ì¶œë ¥ í˜•ì‹ â€” í•œêµ­ì–´ ë§ˆí¬ë‹¤ìš´]
# ì»¤í”Œ ê¶í•© ë¦¬í¬íŠ¸
- í•œì¤„ ì´í‰: (ì‹œí¬+ë¬´ì„­+í˜¸ë“¤ê°‘ ë¯¹ìŠ¤)
## ê°œì¸ ìš”ì•½
- A íŠ¹ì§• ìš”ì•½:
- B íŠ¹ì§• ìš”ì•½:
## ê¶í•© ì‹œë„ˆì§€ (3)
- 
- 
- 
## ì ì¬ ì¶©ëŒ í¬ì¸íŠ¸ (3)
- 
- 
- 
## ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ íŒ (3)
- 
- 
- 
## ì˜¤ëŠ˜ì˜ ë°ì´íŠ¸ ë©˜íŠ¸(1)
- 
---
**ê³ ì§€:** ì˜¤ë½/ì—”í„°í…Œì¸ë¨¼íŠ¸ ëª©ì .
`.trim();

    let currentMode = 'single'; // ê¸°ë³¸: ë‚˜í™€ë¡œ ê´€ìƒ

    function renderUploadArea(mode) {
      if (mode === 'single') {
        uploadArea.innerHTML = `
          <input id="file1" type="file" accept="image/*" class="block w-full text-sm file:mr-3 file:py-2 file:px-3 file:rounded-lg file:border file:bg-white file:text-gray-900 file:font-semibold file:border-gray-200">
          <div class="text-xs text-gray-600">
            ì‚¬ì§„ì„ í•œ ì¥ë§Œ, í•œ ëª…ì˜ ì „ë©´ ì–¼êµ´ì´ ëª…í™•í•˜ê²Œ ë‚˜ì˜¤ë„ë¡ ì˜¬ë ¤ì£¼ì„¸ìš”.<br>
            ì‚¬ëŒì´ ì•„ë‹ˆê±°ë‚˜ ì¸ì‹ì´ ë¶ˆëª…í™•í•œ ê²½ìš° ì œëŒ€ë¡œ ëœ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
            ì‚¬ì§„ì€ ì„œë²„ì— ì €ì¥ë˜ì§€ ì•Šìœ¼ë‹ˆ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•˜ì„¸ìš”
          </div>`;
      } else {
        uploadArea.innerHTML = `
          <div>
            <div class="text-xs text-gray-600 mb-1">ì²« ë²ˆì§¸ ì‚¬ì§„ (A)</div>
            <input id="file1" type="file" accept="image/*" class="block w-full text-sm file:mr-3 file:py-2 file:px-3 file:rounded-lg file:border file:bg-white file:text-gray-900 file:font-semibold file:border-gray-200">
          </div>
          <div>
            <div class="text-xs text-gray-600 mb-1">ë‘ ë²ˆì§¸ ì‚¬ì§„ (B)</div>
            <input id="file2" type="file" accept="image/*" class="block w-full text-sm file:mr-3 file:py-2 file:px-3 file:rounded-lg file:border file:bg-white file:text-gray-900 file:font-semibold file:border-gray-200">
          </div>
          <div class="text-xs text-gray-600">
            ì‚¬ì§„ì€ ì´ 2ì¥, ê° ì‚¬ì§„ì—ëŠ” í•œ ëª…ì˜ ì „ë©´ ì–¼êµ´ì´ ëª…í™•í•˜ê²Œ ë‚˜ì˜¤ë„ë¡ ì˜¬ë ¤ì£¼ì„¸ìš”.<br>
            ì‚¬ëŒì´ ì•„ë‹ˆê±°ë‚˜ ì¸ì‹ì´ ë¶ˆëª…í™•í•œ ê²½ìš° ì œëŒ€ë¡œ ëœ ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
            ì‚¬ì§„ì€ ì„œë²„ì— ì €ì¥ë˜ì§€ ì•Šìœ¼ë‹ˆ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•˜ì„¸ìš”
          </div>`;
      }
      attachFileListeners();
      checkReady();
    }

    modeRadios.forEach(r => {
      r.addEventListener('change', () => {
        if (r.checked) {
          currentMode = r.value;
          renderUploadArea(currentMode);
          outputEl.textContent = 'ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.';
          statusEl.textContent = 'ëŒ€ê¸° ì¤‘';
        }
      });
    });

    function checkReady() {
      const f1 = document.getElementById('file1')?.files?.[0] || null;
      const f2 = document.getElementById('file2')?.files?.[0] || null;
      if (currentMode === 'single') {
        runBtn.disabled = !f1;
      } else {
        runBtn.disabled = !(f1 && f2);
      }
      copyBtn.disabled = true;
      shareBtn.disabled = true;
    }

    function attachFileListeners() {
      const f1 = document.getElementById('file1');
      const f2 = document.getElementById('file2');
      if (f1) {
        f1.addEventListener('change', checkReady);
        f1.addEventListener('input', checkReady);
      }
      if (f2) {
        f2.addEventListener('change', checkReady);
        f2.addEventListener('input', checkReady);
      }
    }

    // ì´ˆê¸° ë Œë”
    renderUploadArea(currentMode);

    function buildResultText() {
      return (outputEl.textContent || '').trim();
    }
    function withWatermark(text) {
      const link = 'https://hyesugi.com/facereading';
      if (!text) return '';
      return `${text}\n\nâ€” ë” ë³´ê¸°: ${link}`;
    }

    copyBtn.addEventListener('click', async () => {
      const txt = withWatermark(buildResultText());
      if (!txt) return alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
      try {
        await navigator.clipboard.writeText(txt);
        alert('ê²°ê³¼ê°€ ë§í¬ì™€ í•¨ê»˜ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
      } catch (e) {
        console.error(e);
        alert('ë³µì‚¬ ì‹¤íŒ¨');
      }
    });

    shareBtn.addEventListener('click', async () => {
      const txt = withWatermark(buildResultText());
      if (!txt) return alert('ê³µìœ í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
      try {
        if (navigator.share) {
          await navigator.share({
            title: document.title || 'ê´€ìƒ ë¦¬í¬íŠ¸',
            text: txt,
            url: 'https://hyesugi.com/facereading'
          });
        } else {
          await navigator.clipboard.writeText(txt);
          alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ê³µìœ  ë¯¸ì§€ì› â†’ í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨');
        }
      } catch (e) {
        console.error(e);
        alert('ê³µìœ  ì‹¤íŒ¨');
      }
    });

    siteShareBtn.addEventListener('click', async () => {
      const url = 'https://hyesugi.com/facereading';
      try {
        if (navigator.share) {
          await navigator.share({
            title: document.title || 'ì†Œë¦„ë‹ëŠ” AI ê´€ìƒê°€ ì–‘ë°˜',
            url
          });
        } else {
          await navigator.clipboard.writeText(url);
          alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ê³µìœ  ë¯¸ì§€ì› â†’ ì‚¬ì´íŠ¸ ì£¼ì†Œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
      } catch (e) {
        console.error(e);
        alert('ê³µìœ  ì‹¤íŒ¨');
      }
    });

    // ì‹¤í–‰: í”„ë¡¬í”„íŠ¸ëŠ” í™”ë©´ì— ë…¸ì¶œë˜ì§€ ì•Šê³  ì„œë²„ë¡œë§Œ ì „ì†¡
    runBtn.addEventListener('click', async () => {
      const f1 = document.getElementById('file1')?.files?.[0] || null;
      const f2 = document.getElementById('file2')?.files?.[0] || null;
      if (currentMode === 'single' && !f1) return;
      if (currentMode === 'couple' && !(f1 && f2)) return;

      statusEl.textContent = 'ë¶„ì„ ì¤‘...';
      outputEl.textContent = 'ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...';

      copyBtn.disabled = true;
      shareBtn.disabled = true;

      try {
        const fd = new FormData();
        fd.append('mode', currentMode);
        fd.append('prompt', currentMode === 'single' ? PROMPT_SINGLE : PROMPT_COUPLE); // ğŸ”’ ì„œë²„ë¡œë§Œ ì „ë‹¬
        fd.append('image1', f1);
        if (currentMode === 'couple') fd.append('image2', f2);

        const res = await fetch(API_URL, { method: 'POST', body: fd });
        if (!res.ok) {
          const text = await res.text().catch(()=> '');
          throw new Error(`HTTP ${res.status} ${res.statusText} ${text?'- '+text:''}`);
        }
        const data = await res.json();
        const content = (data && (data.content || data.result || data.text)) || '';
        outputEl.textContent = content || 'ë‚´ìš©ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.';
        statusEl.textContent = 'ì™„ë£Œ';

        const hasContent = !!(content && content.trim());
        copyBtn.disabled = !hasContent;
        shareBtn.disabled = !hasContent;
      } catch (err) {
        outputEl.textContent = 'ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message;
        statusEl.textContent = 'ì‹¤íŒ¨';
      }
    });
  </script>

  <!-- Footer -->
  <footer id="site-footer" class="text-center text-sm text-gray-700 py-6 space-y-2">
    <div>
      <a href="https://hyesugi.com/donation" target="_blank" rel="noopener noreferrer"
         class="text-black font-semibold hover:underline">
         í˜œìˆ™ì´ì—ê²Œ ì»¤í”¼ í•œì” ì‚¬ì£¼ê¸° â˜•
      </a>
    </div>
    <hr class="border-t border-gray-300 opacity-50 w-2/3 mx-auto">
    <div id="ad-slot"></div>
  </footer>

  <script>
    // âš ï¸ ì›ë³¸ ì½”ë“œì— ëˆ„ë½ëœ ì‰¼í‘œë¥¼ ë³´ì™„í•¨
    const ads = [
      { text: "ì¸í„°ë„· ë°”ê¾¸ë©´ 47ë§Œì› ì§€ê¸‰í•´ë“œë ¤ìš”!", url: "https://iryan.kr/t73750ushf" },
      { text: "1ì‹œê°„ íˆ¬ì, ì›”í‰ê·  148ë§Œì› ë²„ëŠ” ê³ íš¨ìœ¨ ë¶€ì—…", url: "https://iryan.kr/t738hkv2k0" },
      { text: "ë„·í”Œë¦­ìŠ¤ ê¸€ë¡œë²Œ ì»¨í…ì¸  ì ê¸ˆí•´ì œí•˜ëŠ” ë°©ë²•", url: "https://hyesugi.com/vpn" },
      { text: "ì¸ê°„ìœ¼ë¡œ ì‚´ì•„ë‚¨ê¸°", url: "https://hyesugi.com/world" },
      { text: "ë…¸íŠ¸ë¶, ë°ìŠ¤í¬íƒ‘, ì•„ì´íŒ¨ë“œ, íƒœë¸”ë¦¿ ì´ˆíŠ¹ê°€ êµ¬ë§¤", url: "https://hyesugi.com/refur" }
    ];
    const pick = ads[Math.floor(Math.random() * ads.length)];
    const slot = document.getElementById("ad-slot");
    if (slot) {
      const a = document.createElement("a");
      a.href = pick.url;
      a.target = "_blank";
      a.rel = "noopener noreferrer";
      a.className = "text-blue-600 font-bold underline";
      a.textContent = pick.text;
      slot.replaceChildren(a);
    }
  </script>
</body>
</html>
