<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-QR5TWB3RYJ');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017"
     crossorigin="anonymous"></script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Tube 글 생성기 — hyesugi.com</title>
  <meta name="description" content="번호/제목/유튜브 링크/리뷰를 입력하면 hyesugi.com/tube/번호 형태의 완성 HTML을 생성합니다." />
  <meta name="robots" content="noindex,nofollow" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ color-scheme: light; }
    textarea { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-5xl mx-auto p-6 space-y-6">
    <header class="flex items-center justify-between">
      <h1 class="text-2xl font-extrabold">hyesugi — Tube HTML 생성기</h1>
      <a href="https://hyesugi.com" class="text-sm text-blue-600 hover:underline" target="_blank" rel="noopener noreferrer">사이트 열기</a>
    </header>

    <!-- 입력 폼 -->
    <section class="bg-white rounded-2xl shadow p-5 space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <label class="block">
          <span class="block text-sm font-semibold">번호 (예: 001)</span>
          <input id="num" type="text" placeholder="001" class="mt-1 w-full rounded-lg border px-3 py-2" />
        </label>
        <label class="block md:col-span-2">
          <span class="block text-sm font-semibold">제목</span>
          <input id="title" type="text" placeholder="가격 때문에 논란 중인 이효리 요가원" class="mt-1 w-full rounded-lg border px-3 py-2" />
        </label>
      </div>

      <label class="block">
        <span class="block text-sm font-semibold">유튜브 링크</span>
        <input id="yt" type="url" placeholder="https://youtube.com/shorts/-_-O3QgyLB4?si=LnuqFpfUtc5klfCk" class="mt-1 w-full rounded-lg border px-3 py-2" />
      </label>

      <label class="block">
        <span class="block text-sm font-semibold">리뷰 (노란 박스에 들어갑니다)</span>
        <textarea id="review" rows="6" placeholder="여기에 리뷰를 입력하세요. 줄바꿈 유지됨." class="mt-1 w-full rounded-lg border px-3 py-2"></textarea>
      </label>

      <div class="flex flex-wrap gap-3">
        <button id="makeBtn" class="bg-black text-white px-4 py-2 rounded-lg">HTML 생성</button>
        <button id="copyBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg" disabled>복사하기</button>
      </div>
    </section>

    <!-- 출력 -->
    <section class="bg-white rounded-2xl shadow p-5 space-y-3">
      <div class="flex items-center justify-between">
        <h2 class="font-bold">생성된 HTML</h2>
        <div class="text-sm text-slate-500">완성 후 /tube/번호/ 에 <code>index.html</code>로 업로드</div>
      </div>
      <textarea id="out" rows="28" class="w-full rounded-lg border p-3" placeholder="여기에 결과 HTML이 출력됩니다" readonly></textarea>
      <details class="mt-2">
        <summary class="cursor-pointer text-sm text-slate-600">파일 경로 가이드</summary>
        <div class="text-sm text-slate-700 mt-2 space-y-1">
          <div>- 업로드 경로: <code>/tube/번호/index.html</code></div>
          <div>- 썸네일: <code>/tube/번호/preview.jpg</code> (메타태그/OG/Twitter에서 사용)</div>
        </div>
      </details>
    </section>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);
    const numEl = $('#num');
    const titleEl = $('#title');
    const ytEl = $('#yt');
    const reviewEl = $('#review');
    const outEl = $('#out');
    const makeBtn = $('#makeBtn');
    const copyBtn = $('#copyBtn');

    function escAttr(s=''){ return s.replaceAll('"','&quot;'); }
    function escHtml(s=''){ return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
    function toDescription(title){ return title.trim(); } // 예시처럼 title=description 사용

    function buildHTML({num, title, yt, review}) {
      const desc = toDescription(title);
      const base = `https://hyesugi.com/tube/${num}`;
      const ogImg = `${base}/preview.jpg`;
      const reviewHTML = escHtml(review).replaceAll('\n','<br>');

      // === 아래 템플릿은 사용자 예시에 맞춰 구성됨 ===
      return `<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-QR5TWB3RYJ');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017" crossorigin="anonymous"></script>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

<!-- ▼▼▼ 메타태그(제목/설명/OG/Twitter) — 폼 입력값으로 자동 채움 ▼▼▼ -->
<title>${escHtml(title)}</title>
<meta name="description" content="${escAttr(desc)}" />
<link rel="canonical" href="${base}" />
<meta name="robots" content="index,follow" />
<meta name="theme-color" content="#9bbbd4" />

<!-- Favicon & App Icons -->
<link rel="icon" href="https://hyesugi.com/favicon.ico" sizes="any" />
<link rel="apple-touch-icon" href="https://hyesugi.com/apple-touch-icon.png" sizes="180x180" />
<link rel="manifest" href="https://hyesugi.com/site.webmanifest" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="${base}" />
<meta property="og:url" content="${base}" />
<meta property="og:title" content="${escAttr(title)}" />
<meta property="og:description" content="${escAttr(desc)}" />
<meta property="og:image" content="${ogImg}" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="${ogImg}" />

<!-- Twitter (X) Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="${escAttr(title)}" />
<meta name="twitter:description" content="${escAttr(desc)}" />
<meta name="twitter:image" content="${ogImg}" />

<link rel="preload" as="image" href="${ogImg}" imagesrcset="${ogImg}" />
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white font-sans">
  <div id="app" class="flex flex-col min-h-screen max-w-3xl mx-auto bg-[#9bbbd4]">

    <!-- Header -->
    <header class="bg-white/30 backdrop-blur-sm text-center py-4 shadow-md relative">
      <h1 class="text-xl font-bold text-gray-800 flex items-center justify-center gap-2">
        <a href="https://hyesugi.com" class="flex items-center justify-center gap-2" aria-label="hyesugi.com으로 이동">
          <img src="https://hyesugi.com/hyesugi.jpg" alt="혜숙이" class="w-14 h-14 rounded-full object-cover">
          당신의 상담친구 혜숙이
        </a>
      </h1>
      <p class="text-sm text-gray-600">우측 메뉴를 눌러보세요</p>
      <button id="menu-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/60 focus:outline-none focus:ring-2 focus:ring-black/40" aria-label="메뉴 열기">
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/></svg>
      </button>
    </header>

    <!-- 본문 -->
    <main id="content" class="flex-1 p-4">
      <section id="video-post" class="space-y-4">
        <!-- (1) 제목 -->
        <h2 class="text-2xl font-extrabold text-gray-900 tracking-tight">${escHtml(title)}</h2>

        <!-- (2) YouTube embed -->
        <div class="w-full rounded-xl overflow-hidden shadow-md bg-white">
          <div class="relative w-full" style="padding-bottom:56.25%;">
            <iframe
              id="yt-iframe"
              class="absolute left-0 top-0 w-full h-full"
              src=""
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              data-youtube-url="${escAttr(yt)}">
            </iframe>
          </div>
        </div>

        <!-- (3) 리뷰 (노란 박스) -->
        <div class="bg-[#FFCD50] text-black rounded-xl p-4 shadow leading-relaxed">
          <p class="font-semibold">${reviewHTML}</p>
        </div>

        <!-- (4) 이 페이지 공유 버튼 -->
        <div class="pt-2">
          <button id="inline-share-btn" class="w-full md:w-auto inline-flex items-center justify-center gap-2 bg-black text-white px-4 py-2 rounded-lg shadow hover:opacity-90 active:scale-[0.99] transition" aria-label="이 페이지 공유하기">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12v7a1 1 0 001 1h14a1 1 0 001-1v-7M16 6l-4-4m0 0L8 6m4-4v16"/></svg>
            이 페이지 공유하기
          </button>
        </div>
      </section>
    </main>
  </div>

  <!-- Drawer -->
  <div id="drawer-overlay" class="fixed inset-0 bg-black/30 hidden z-40"></div>
  <aside id="drawer" class="fixed right-0 top-0 h-full w-1/2 max-w-md bg-white shadow-xl translate-x-full transition-transform duration-300 z-50">
    <div class="flex items-center justify-between p-4 border-b">
      <h2 class="font-bold text-gray-800">메뉴</h2>
      <button id="drawer-close" class="p-2 rounded-md hover:bg-gray-100" aria-label="메뉴 닫기">
        <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
    </div>
    <nav class="p-4 space-y-2">
      <a href="https://hyesugi.com" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">HOME</a>
      <a href="https://hyesugi.com/luck" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">위로와 행운</a>
      <a href="https://hyesugi.com/fate" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">사주와 궁합</a>
      <a href="https://hyesugi.com/facereading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">나의 관상은</a>
      <a href="https://hyesugi.com/handreading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">나의 손금은</a>
      <a href="https://hyesugi.com/board" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">익명 게시판</a>
      <a href="https://hyesugi.com/expert" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">전문가 상담</a>
      <a href="https://hyesugi.com/solo" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">솔로는 여기</a>
      <a href="https://hyesugi.com/money" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">돈되는 정보</a>
      <a href="https://hyesugi.com/game" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">신나는 게임</a>
      <a href="https://hyesugi.com/tube" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">혜숙이 튜브</a>
      <a href="https://hyesugi.com/info" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">이용 안내</a>
      <a href="#" id="share-btn" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">공유하기</a>
    </nav>
  </aside>

  <!-- 스크립트: 드로어/공유/임베드/인라인공유/광고 -->
  <script>
    // Drawer
    const menuBtn = document.getElementById('menu-btn');
    const drawer = document.getElementById('drawer');
    const drawerOverlay = document.getElementById('drawer-overlay');
    const drawerClose = document.getElementById('drawer-close');
    function openDrawer(){drawer.classList.remove('translate-x-full');drawerOverlay.classList.remove('hidden');}
    function closeDrawer(){drawer.classList.add('translate-x-full');drawerOverlay.classList.add('hidden');}
    menuBtn?.addEventListener('click', openDrawer);
    drawerOverlay?.addEventListener('click', closeDrawer);
    drawerClose?.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    // Drawer Share
    const shareBtn = document.getElementById('share-btn');
    if (shareBtn){
      shareBtn.addEventListener('click', async (e)=>{
        e.preventDefault();
        const shareData = { title: document.title || '혜숙이의 상담소', text: '다정한 AI 상담가 혜숙이와 대화해 보세요.', url: location.href };
        try{
          if(navigator.share){ await navigator.share(shareData); }
          else { await navigator.clipboard.writeText(shareData.url); alert('링크가 클립보드에 복사되었습니다: ' + shareData.url); }
        }catch(err){ console.error(err); alert('공유에 실패했어요. 잠시 후 다시 시도해 주세요.');}
      });
    }

    // YouTube URL -> embed 변환 (shorts 지원)
    (function mountYouTubeEmbed(){
      const iframe = document.getElementById('yt-iframe');
      if(!iframe) return;
      const raw = (iframe.getAttribute('data-youtube-url')||'').trim();
      if(!raw){ return; }
      let videoId = '';
      try{
        const u = new URL(raw);
        if(u.hostname.includes('youtu.be')) videoId = u.pathname.replace('/','');
        else if(u.hostname.includes('youtube.com')){
          videoId = u.searchParams.get('v') || '';
          if(!videoId && u.pathname.startsWith('/shorts/')){
            videoId = u.pathname.split('/shorts/')[1]?.split('/')[0] || '';
          }
        }
      }catch(e){}
      const embedSrc = videoId ? `https://www.youtube.com/embed/${videoId}` : raw;
      iframe.src = embedSrc;
    })();

    // Inline Share (노란 박스 아래 전용)
    (function mountInlineShare(){
      const btn = document.getElementById('inline-share-btn');
      if(!btn) return;
      const titleEl = document.querySelector('#video-post h2');
      const pageTitle = (titleEl?.textContent || document.title || '혜숙이의 상담소').trim();
      const pageDesc = (document.querySelector('meta[name="description"]')?.content || '다정한 AI 상담가 혜숙이와 대화해 보세요.').trim();
      const pageUrl = location.href;
      const shareData = { title: pageTitle, text: pageDesc, url: pageUrl };
      btn.addEventListener('click', async ()=>{
        try{
          if(navigator.share){ await navigator.share(shareData); }
          else { await navigator.clipboard.writeText(pageUrl); alert('링크가 클립보드에 복사되었습니다: ' + pageUrl); }
        }catch(err){ console.error(err); alert('공유에 실패했어요. 잠시 후 다시 시도해 주세요.');}
      });
    })();

    // 간단 광고 링크 (원문과 동일)
    (function(){
      const ads = [
        { text: "인터넷 바꾸면 47만원 지급해드려요!", url: "https://iryan.kr/t73750ushf" },
        { text: "1시간 투자, 월평균 148만원 버는 고효율 부업", url: "https://iryan.kr/t738hkv2k0" },
        { text: "넷플릭스 글로벌 컨텐츠 잠금해제하는 방법", url: "https://hyesugi.com/vpn" },
        { text: "인간으로 살아남기", url: "https://hyesugi.com/world" },
        { text: "노트북, 데스크탑, 아이패드, 태블릿 초특가 구매", url: "https://hyesugi.com/refur" }
      ];
      const pick = ads[Math.floor(Math.random()*ads.length)];
      const slot = document.getElementById('ad-slot');
      if(slot){
        const a = document.createElement('a');
        a.href = pick.url; a.target='_blank'; a.rel='noopener noreferrer';
        a.className = 'text-blue-600 font-bold underline';
        a.textContent = pick.text;
        slot.replaceChildren(a);
      }
    })();

    // === 생성기 로직 ===
    function validate() {
      const num = numEl.value.trim();
      const title = titleEl.value.trim();
      const yt = ytEl.value.trim();
      const review = reviewEl.value;
      if (!/^\d{3,}$/.test(num)) return { ok:false, msg:'번호는 숫자 3자리 이상(예: 001)로 입력하세요.' };
      if (!title) return { ok:false, msg:'제목을 입력하세요.' };
      if (!yt) return { ok:false, msg:'유튜브 링크를 입력하세요.' };
      if (!review) return { ok:false, msg:'리뷰를 입력하세요.' };
      return { ok:true, data:{ num, title, yt, review } };
    }

    function buildPageHTML(data){
      // num은 URL/이미지 경로에만 쓰이므로 buildHTML에서 그대로 처리
      return buildHTML(data).replaceAll('https://hyesugi.com/tube/undefined', `https://hyesugi.com/tube/${data.num}`);
    }

    makeBtn.addEventListener('click', () => {
      const v = validate();
      if (!v.ok) { alert(v.msg); return; }
      const html = buildHTML(v.data);
      outEl.value = html;
      copyBtn.disabled = false;
      // 텍스트 자동 선택(편의)
      outEl.focus();
      outEl.select();
    });

    copyBtn.addEventListener('click', async () => {
      if (!outEl.value) return;
      try {
        await navigator.clipboard.writeText(outEl.value);
        copyBtn.textContent = '복사 완료!';
        setTimeout(()=> copyBtn.textContent='복사하기', 1200);
      } catch (e) {
        alert('클립보드 복사 실패. 수동 복사해주세요.');
      }
    });
  </script>
</body>
</html>
