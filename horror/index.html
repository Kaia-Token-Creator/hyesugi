<!DOCTYPE html> 
<html lang="ko"> 
<head> 
  <!-- Google tag (gtag.js) --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QR5TWB3RYJ"></script> 
  <script>
    window.dataLayer = window.dataLayer || []; 
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-QR5TWB3RYJ'); 
  </script>

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017" crossorigin="anonymous"></script> 

  <!-- ê¸°ë³¸ ì„¤ì • --> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" /> 
  <title>í˜œìˆ™ì´, ë§ˆìŒì˜ ì‰¼í„° â€” ê³µí¬ê²Œì„</title> 
  <meta name="description" content="ìƒë‹´ê°€ì´ì ë‹¤ì •í•œ ì¹œêµ¬ â€˜í˜œìˆ™ì´â€™. A/B ì„ íƒí˜• 10ì±•í„° ê³µí¬ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”." /> 
  <link rel="canonical" href="https://hyesugi.com/" /> 
  <meta name="robots" content="index,follow" /> 
  <meta name="theme-color" content="#000000" /> 

  <!-- Favicon & App Icons --> 
  <link rel="icon" href="https://hyesugi.com/favicon.ico" sizes="any" /> 
  <link rel="apple-touch-icon" href="https://hyesugi.com/apple-touch-icon.png" sizes="180x180" /> 
  <link rel="manifest" href="https://hyesugi.com/site.webmanifest" /> 

  <!-- Open Graph --> 
  <meta property="og:type" content="website" /> 
  <meta property="og:site_name" content="hyesugi.com" /> 
  <meta property="og:url" content="https://hyesugi.com/horror" /> 
  <meta property="og:title" content="ê³µí¬ê²Œì„ â€” í˜œìˆ™ì´ì˜ ì´ì•¼ê¸°" /> 
  <meta property="og:description" content="A/B ì„ íƒìœ¼ë¡œ ì´ì–´ì§€ëŠ” 10ì±•í„° ê³µí¬ ì´ì•¼ê¸°" /> 
  <meta property="og:image" content="https://hyesugi.com/og-image.jpg" /> 
  <meta property="og:image:width" content="1200" /> 
  <meta property="og:image:height" content="630" /> 
  <meta property="og:image:alt" content="í˜œìˆ™ì´ ê³µí¬ê²Œì„ ë¯¸ë¦¬ë³´ê¸°" /> 

  <!-- Twitter (X) Card --> 
  <meta name="twitter:card" content="summary_large_image" /> 
  <meta name="twitter:title" content="ê³µí¬ê²Œì„ â€” í˜œìˆ™ì´ì˜ ì´ì•¼ê¸°" /> 
  <meta name="twitter:description" content="A/B ì„ íƒìœ¼ë¡œ ì´ì–´ì§€ëŠ” 10ì±•í„° ê³µí¬ ì´ì•¼ê¸°" /> 
  <meta name="twitter:image" content="https://hyesugi.com/og-image.jpg" /> 

  <link rel="preload" as="image" href="https://hyesugi.com/preview.jpg" imagesrcset="https://hyesugi.com/preview.jpg" /> 

  <!-- Tailwind --> 
  <script src="https://cdn.tailwindcss.com"></script> 

  <!-- ğŸ”´ í…Œë§ˆ ì˜¤ë²„ë¼ì´ë“œ: ê²€ì • ë°°ê²½ + ë¹¨ê°„ ê¶ì„œì²´ -->
  <style>
    :root{
      --bg:#000000;
      --panel:#0b0b0b;
      --ink:#e60000;
      --ink-dim:#d20000;
      --btn-bg:#111111;
      --btn-bg-hover:#1c1c1c;
      --ring:rgba(230,0,0,0.5);
    }
    html, body { background: var(--bg); }
    body {
      color: var(--ink);
      font-family: "Gungsuh","GungSeo","Batang","Gowun Batang","Nanum Myeongjo",serif;
      letter-spacing: .2px;
    }
    ::selection { background:#700; color:#fff; }
  </style>
</head> 

<body class="bg-black font-sans"> 
  <!-- âœ… ê¸°ì¡´ ì»¨í…Œì´ë„ˆ: ë°°ê²½ìƒ‰ë§Œ ê²€ì •ìœ¼ë¡œ ë³€ê²½ -->
  <div id="app" class="flex flex-col min-h-screen max-w-3xl mx-auto bg-black"> 

    <!-- âœ… ê¸°ì¡´ í—¤ë”/ë©”ë‰´ ìœ ì§€ -->
    <header class="bg-black text-center py-4 shadow-md relative"> 
      <h1 class="text-xl font-bold text-red-600 flex items-center justify-center gap-2" style="font-family:'Gungsuh','GungSeo','Batang','Gowun Batang',serif;">
        <a href="https://hyesugi.com" class="flex items-center justify-center gap-2" aria-label="hyesugi.comìœ¼ë¡œ ì´ë™"> 
          <img src="https://hyesugi.com/hyesugi.jpg" alt="í˜œìˆ™ì´" class="w-14 h-14 rounded-full object-cover border border-red-900"> 
          ë‹¹ì‹ ì˜ ìƒë‹´ì¹œêµ¬ í˜œìˆ™ì´ 
        </a> 
      </h1> 
      <p class="text-sm" style="color:var(--ink-dim)"><b></b>ê³µí¬ ê²Œì„</p>

      <!-- í–„ë²„ê±° ë²„íŠ¼ --> 
      <button id="menu-btn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-red-700/40" aria-label="ë©”ë‰´ ì—´ê¸°"> 
        <svg class="w-6 h-6" style="color:var(--ink)" fill="none" stroke="currentColor" viewBox="0 0 24 24"> 
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16"/> 
        </svg> 
      </button> 
    </header> 

    <!-- âœ… ë³¸ë¬¸: ì—¬ê¸°ë§Œ ê³µí¬ê²Œì„ìœ¼ë¡œ ì±„ì›€ -->
    <main id="content" class="flex-1 p-4"> 
      <section class="space-y-4">
        <!-- ë©”ì‹œì§€ ë°•ìŠ¤ -->
        <div id="story-box" class="rounded-2xl p-5 shadow-lg"
             style="background:var(--panel); border:1px solid #161616; line-height:1.85; font-size:1.05rem;">
          <div id="chapter-indicator" class="text-xs uppercase tracking-widest mb-2" style="color:#a40000;">
            ì¤€ë¹„ ì¤‘â€¦
          </div>
          <div id="story-text" class="whitespace-pre-wrap"></div>
        </div>

        <!-- A/B ë²„íŠ¼ -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <button id="btn-A" class="w-full rounded-xl px-5 py-4 text-lg border transition focus:outline-none focus:ring"
                  style="background:var(--btn-bg); border-color:#2a2a2a; color:var(--ink); font-family:'Gungsuh','GungSeo','Batang','Gowun Batang',serif;">
            A
          </button>
          <button id="btn-B" class="w-full rounded-xl px-5 py-4 text-lg border transition focus:outline-none focus:ring"
                  style="background:var(--btn-bg); border-color:#2a2a2a; color:var(--ink); font-family:'Gungsuh','GungSeo','Batang','Gowun Batang',serif;">
            B
          </button>
        </div>

        <!-- ë¦¬ìŠ¤íƒ€íŠ¸/ê³µìœ  -->
        <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-3">
          <button id="btn-restart" class="flex-1 rounded-xl px-5 py-3 text-base border transition"
                  style="background:var(--btn-bg); border-color:#2a2a2a; color:var(--ink-dim); font-family:'Gungsuh','GungSeo','Batang','Gowun Batang',serif;">
            ë‹¤ë¥¸ ìŠ¤í† ë¦¬ ì§„í–‰
          </button>
          <button id="btn-share" class="rounded-xl px-5 py-3 text-base border transition"
                  style="background:var(--btn-bg); border-color:#2a2a2a; color:var(--ink); font-family:'Gungsuh','GungSeo','Batang','Gowun Batang',serif;">
            ê³µí¬ê²Œì„ ê³µìœ í•˜ê¸°
          </button>
        </div>

        <p class="text-xs opacity-70" style="color:#7a0000;">* 10ì¥ì— ë„ë‹¬í•˜ë©´ A/B ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤. â€œë‹¤ë¥¸ ìŠ¤í† ë¦¬ ì§„í–‰â€ìœ¼ë¡œ ìƒˆë¡œìš´ ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•˜ì„¸ìš”.</p>
      </section>
    </main> 

    <!-- âœ… ê¸°ì¡´ ë“œë¡œì–´/ì˜¤ë²„ë ˆì´ ìœ ì§€ -->
    <div id="drawer-overlay" class="fixed inset-0 bg-black/30 hidden z-40"></div> 
    <aside id="drawer" class="fixed right-0 top-0 h-full w-1/2 max-w-md bg-white shadow-xl translate-x-full transition-transform duration-300 z-50"> 
      <div class="flex items-center justify-between p-4 border-b"> 
        <h2 class="font-bold text-gray-800">ë©”ë‰´</h2> 
        <button id="drawer-close" class="p-2 rounded-md hover:bg-gray-100" aria-label="ë©”ë‰´ ë‹«ê¸°"> 
          <svg class="w-5 h-5 text-gray-700" viewBox="0 0 24 24" fill="none" stroke="currentColor"> 
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/> 
          </svg> 
        </button> 
      </div> 
      <nav class="p-4 space-y-2"> 
        <a href="https://hyesugi.com" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">HOME</a> 
        <a href="https://hyesugi.com/luck" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìœ„ë¡œì™€ í–‰ìš´</a> 
        <a href="https://hyesugi.com/fate" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‚¬ì£¼ì™€ ê¶í•©</a> 
        <a href="https://hyesugi.com/facereading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ê´€ìƒì€</a> 
        <a href="https://hyesugi.com/handreading" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ë‚˜ì˜ ì†ê¸ˆì€</a> 
        <a href="https://hyesugi.com/board" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ìµëª… ê²Œì‹œíŒ</a> 
        <a href="https://hyesugi.com/expert" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì „ë¬¸ê°€ ìƒë‹´</a> 
        <a href="https://hyesugi.com/solo" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì†”ë¡œëŠ” ì—¬ê¸°</a> 
        <a href="https://hyesugi.com/money" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ëˆë˜ëŠ” ì •ë³´</a> 
        <a href="https://hyesugi.com/game" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì‹ ë‚˜ëŠ” ê²Œì„</a> 
        <a href="https://hyesugi.com/tube" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">í˜œìˆ™ì´ íŠœë¸Œ</a> 
        <a href="https://hyesugi.com/info" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ì´ìš© ì•ˆë‚´</a> 
        <a href="#" id="share-btn" class="block px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-800">ê³µìœ í•˜ê¸°</a> 
      </nav> 
    </aside> 

    <!-- âœ… ê¸°ì¡´ í‘¸í„°/ê´‘ê³  ì˜ì—­ ìœ ì§€ -->
    <footer id="site-footer" class="text-center text-sm py-6 space-y-2" style="color:var(--ink-dim)"> 
      <div>
        <a href="https://hyesugi.com/donation" target="_blank" rel="noopener noreferrer" class="font-semibold hover:underline" style="color:var(--ink);">
          í˜œìˆ™ì´ì—ê²Œ ì»¤í”¼ í•œì” ì‚¬ì£¼ê¸° â˜•
        </a>
      </div>
      <hr class="border-t border-gray-700 opacity-50 w-2/3 mx-auto">
      <div id="ad-slot"></div> 
    </footer> 
  </div> 

  <!-- âœ… ê¸°ì¡´ ê³µí†µ ìŠ¤í¬ë¦½íŠ¸(ë“œë¡œì–´+ê³µìœ ) ìœ ì§€ -->
  <script> 
    const menuBtn = document.getElementById('menu-btn'); 
    const drawer = document.getElementById('drawer'); 
    const drawerOverlay = document.getElementById('drawer-overlay'); 
    const drawerClose = document.getElementById('drawer-close'); 

    function openDrawer() { drawer.classList.remove('translate-x-full'); drawerOverlay.classList.remove('hidden'); }
    function closeDrawer() { drawer.classList.add('translate-x-full'); drawerOverlay.classList.add('hidden'); }

    menuBtn.addEventListener('click', openDrawer); 
    drawerOverlay.addEventListener('click', closeDrawer); 
    drawerClose.addEventListener('click', closeDrawer); 
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });

    const shareBtn = document.getElementById('share-btn'); 
    if (shareBtn) {
      shareBtn.addEventListener('click', async (e) => { 
        e.preventDefault(); 
        const shareData = { title: 'í˜œìˆ™ì´ì˜ ìƒë‹´ì†Œ', text: 'ë‹¤ì •í•œ AI ìƒë‹´ê°€ í˜œìˆ™ì´ì™€ ëŒ€í™”í•´ ë³´ì„¸ìš”.', url: location.href };
        try {
          if (navigator.share) await navigator.share(shareData);
          else { await navigator.clipboard.writeText(shareData.url); alert('ë§í¬ ë³µì‚¬ë¨: ' + shareData.url); }
        } catch (err) { console.error(err); alert('ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”.'); }
      });
    }
  </script>

  <!-- âœ… ê³µí¬ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ (API ì—°ë™) -->
  <script>
    const API_ENDPOINT = "/api/horror";

    const storyText = document.getElementById("story-text");
    const chapterIndicator = document.getElementById("chapter-indicator");
    const btnA = document.getElementById("btn-A");
    const btnB = document.getElementById("btn-B");
    const btnRestart = document.getElementById("btn-restart");

    function uuid() {
      return crypto.getRandomValues(new Uint8Array(16)).reduce((a,b)=>a+b.toString(16).padStart(2,"0"),"");
    }
    function loadSession() {
      let sessionId = localStorage.getItem("horrorSessionId");
      if (!sessionId) { sessionId = uuid(); localStorage.setItem("horrorSessionId", sessionId); }
      let log = [];
      try { log = JSON.parse(localStorage.getItem("horrorStoryLog") || "[]"); } catch {}
      return { sessionId, log };
    }
    function saveLog(log) { localStorage.setItem("horrorStoryLog", JSON.stringify(log)); }
    function resetAll() { localStorage.removeItem("horrorStoryLog"); localStorage.setItem("horrorSessionId", uuid()); }

    function setChoiceEnabled(ok) {
      [btnA, btnB].forEach(b => { b.disabled = !ok; b.style.opacity = ok ? "1" : "0.5"; b.style.cursor = ok ? "pointer" : "not-allowed"; });
    }

    async function requestChapter({ chapter, choice, reset=false }) {
      const { sessionId, log } = loadSession();
      const payload = { sessionId, chapter, choice, log, reset };
      const r = await fetch(API_ENDPOINT, { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify(payload) });
      if (!r.ok) throw new Error(await r.text());
      return await r.json();
    }

    function renderChapter(data) {
      const { chapterNumber, text, choices, isFinal } = data;
      chapterIndicator.textContent = `Chapter ${chapterNumber}`;
      storyText.textContent = text;

      if (choices) {
        btnA.textContent = `A. ${choices.A}`;
        btnB.textContent = `B. ${choices.B}`;
        setChoiceEnabled(true);
      } else {
        btnA.textContent = "A";
        btnB.textContent = "B";
        setChoiceEnabled(false);
      }

      const state = loadSession();
      const newLog = [...state.log, { chapter: chapterNumber, text }];
      saveLog(newLog);
    }

    async function boot() {
      setChoiceEnabled(false);
      chapterIndicator.textContent = "ë¡œë”© ì¤‘â€¦ì ì‹œë§Œ ê¸°..ë‹¤...ë ¤...";
      storyText.textContent = "";

      const state = loadSession();
      const last = state.log[state.log.length - 1];

      try {
        if (last?.chapter > 0) {
          chapterIndicator.textContent = `Chapter ${last.chapter}`;
          storyText.textContent = last.text;
          setChoiceEnabled(true);
        } else {
          const data = await requestChapter({ chapter: 0, reset: true });
          renderChapter(data);
        }
      } catch {
        chapterIndicator.textContent = "ì˜¤ë¥˜";
        storyText.textContent = "ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
      }
    }

    async function onPick(p) {
      try {
        setChoiceEnabled(false);
        const state = loadSession();
        const lastChapter = state.log[state.log.length - 1]?.chapter || 0;
        if (state.log.length > 0) { state.log[state.log.length - 1].choice = p; saveLog(state.log); }
        const next = await requestChapter({ chapter: lastChapter, choice: p });
        renderChapter(next);
        setChoiceEnabled(next.choices && !next.isFinal);
      } catch {
        alert("ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
        setChoiceEnabled(true);
      }
    }

    btnA.addEventListener("click", () => onPick("A"));
    btnB.addEventListener("click", () => onPick("B"));
    btnRestart.addEventListener("click", () => { resetAll(); location.reload(); });

    // ì‘ì€ í˜¸ë²„ íš¨ê³¼
    [btnA, btnB, btnRestart].forEach((el) => {
      el.addEventListener("mouseenter", () => { el.style.background = "var(--btn-bg-hover)"; el.style.boxShadow = "0 0 0 2px var(--ring)"; });
      el.addEventListener("mouseleave", () => { el.style.background = "var(--btn-bg)"; el.style.boxShadow = "none"; });
    });

    boot();
  </script>

  <!-- (ì„ íƒ) ëœë¤ ê´‘ê³  ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆë‹¤ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
  <script>
    // ê¸°ì¡´ ads ë°°ì—´/ëœë”ë§ ë¡œì§ ê·¸ëŒ€ë¡œ ë‘ì„¸ìš”.
    // ì˜ˆ: const ads = [ ... ];
    // document.getElementById("ad-slot") ë“±ì— ì‚½ì…
  </script>
</body> 
</html>

